import { __awaiter } from "tslib";
import { findNamespaceId, tryGetName } from '@cardinal/namespaces';
import { useMemo, useState } from 'react';
import { useWalletIdentity } from '../providers/WalletIdentityProvider';
import { TWITTER_NAMESPACE_NAME } from '../utils/constants';
export const useAddressName = (connection, address, namespaceName = TWITTER_NAMESPACE_NAME) => {
    const { handle } = useWalletIdentity();
    const [displayName, setDisplayName] = useState();
    const [loadingName, setLoadingName] = useState(true);
    const refreshName = () => __awaiter(void 0, void 0, void 0, function* () {
        try {
            setLoadingName(true);
            if (address) {
                const [namespaceId] = yield findNamespaceId(namespaceName);
                const n = yield tryGetName(connection, address, namespaceId);
                setDisplayName(n);
            }
        }
        finally {
            setLoadingName(false);
        }
    });
    useMemo(() => {
        void refreshName();
    }, [connection, address === null || address === void 0 ? void 0 : address.toString(), namespaceName, handle]);
    return { displayName, loadingName, refreshName };
};
//# sourceMappingURL=useAddressName.js.map