"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withInitMintCounter = void 0;
const anchor_1 = require("@project-serum/anchor");
const utils_1 = require("../../utils");
const accounts_1 = require("./accounts");
const instruction_1 = require("./instruction");
const pda_1 = require("./pda");
const withInitMintCounter = async (transaction, connection, wallet, mint) => {
    const [mintCounterId] = await (0, pda_1.findMintCounterId)(mint);
    const mintCounterData = await (0, utils_1.tryGetAccount)(() => (0, accounts_1.getMintCounter)(connection, mintCounterId));
    if (!mintCounterData) {
        transaction.add(await (0, instruction_1.initMintCounter)(connection, wallet, mint));
    }
    return [(mintCounterData === null || mintCounterData === void 0 ? void 0 : mintCounterData.parsed.count) || new anchor_1.BN(0), transaction];
};
exports.withInitMintCounter = withInitMintCounter;
//# sourceMappingURL=transaction.js.map