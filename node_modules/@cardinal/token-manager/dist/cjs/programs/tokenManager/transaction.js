"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withInitMintCounter = void 0;
const tslib_1 = require("tslib");
const anchor_1 = require("@project-serum/anchor");
const utils_1 = require("../../utils");
const accounts_1 = require("./accounts");
const instruction_1 = require("./instruction");
const pda_1 = require("./pda");
const withInitMintCounter = (transaction, connection, wallet, mint) => (0, tslib_1.__awaiter)(void 0, void 0, void 0, function* () {
    const [mintCounterId] = yield (0, pda_1.findMintCounterId)(mint);
    const mintCounterData = yield (0, utils_1.tryGetAccount)(() => (0, accounts_1.getMintCounter)(connection, mintCounterId));
    if (!mintCounterData) {
        transaction.add(yield (0, instruction_1.initMintCounter)(connection, wallet, mint));
    }
    return [(mintCounterData === null || mintCounterData === void 0 ? void 0 : mintCounterData.parsed.count) || new anchor_1.BN(0), transaction];
});
exports.withInitMintCounter = withInitMintCounter;
//# sourceMappingURL=transaction.js.map