import { __awaiter } from "tslib";
import { BN } from "@project-serum/anchor";
import { tryGetAccount } from "../../utils";
import { getMintCounter } from "./accounts";
import { initMintCounter } from "./instruction";
import { findMintCounterId } from "./pda";
export const withInitMintCounter = (transaction, connection, wallet, mint) => __awaiter(void 0, void 0, void 0, function* () {
    const [mintCounterId] = yield findMintCounterId(mint);
    const mintCounterData = yield tryGetAccount(() => getMintCounter(connection, mintCounterId));
    if (!mintCounterData) {
        transaction.add(yield initMintCounter(connection, wallet, mint));
    }
    return [(mintCounterData === null || mintCounterData === void 0 ? void 0 : mintCounterData.parsed.count) || new BN(0), transaction];
});
//# sourceMappingURL=transaction.js.map